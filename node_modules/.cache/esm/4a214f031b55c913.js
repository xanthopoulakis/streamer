let express,path,fs,ndjson;_1b5‍.w("express",[["default",["express"],function(v){express=v}]]);_1b5‍.w("path",[["default",["path"],function(v){path=v}]]);_1b5‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_1b5‍.w("ndjson",[["default",["ndjson"],function(v){ndjson=v}]]);// server.js


const app = express();




app.use( express.static( path.join( __dirname, "public" ) ) );

app.get( "/data", ( req, res ) => {
    let readStream = fs.createReadStream( __dirname + "/data.ndjson" ).pipe( ndjson.parse() );

    readStream.on( "data", ( data ) => {
        chunks.push( JSON.stringify( data ) );
    } );

    readStream.on( "end", () => {
        const id = setInterval( () => {
            if ( chunks.length ) {
                res.write( chunks.shift() + "\n" );
            } else {
                clearInterval( id );
                res.end();
            }
        }, 500 );
    } );
} );

app.listen( 9000, () => {
    console.log( "Example app listening on port 9000!" );
} );